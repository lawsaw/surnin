var modal = {



    'defaults': {

        'language': $('html').data('lang'),

    },



    'init': function() {

        var parentObj = this;

        $(window).on(siteOptions.trigger.modalAwesomeOpen, function(e, modalId) {

            modalAwesome.buildUrl(modalId);
            var modalLayout = $(document).find('.'+modalAwesome.default.layout.container + '[data-'+modalAwesome.default.attr.id+'='+modalId+']');

        });


        $(window).on(siteOptions.trigger.modalAwesomeClose, function(e, modalId) {

            //console.log(modalId + 'is closed');

        });


        $(window).on(siteOptions.trigger.modalAwesomeOpenAjax, function(e, data) {

            loaderAwesome.init({
                'container': '.wrap'
            });

            $.get('/modal', {
                'modal': data.modalId,
                'mode': data.mode,
                'animIn': data.animIn,
                'animOut': data.animOut,
                'workClass': data.workClass,
                'winClass': data.winClass,
                'layout': data.layout,
                'model': data.model ? data.model : false,
                'ajax': true,
                'language': parentObj.defaults.language,
                'message': data.message,
                'timeToClose': data.timeToClose
            }, function (html) {
                if (html.status) {
                    //console.log('error ' + html.status);
                    return false;
                }
                else {
                    //console.log('okey ' + html.status);

                    loaderAwesome.destroy({
                        'container': '.wrap'
                    });

                    $('.wrapModalAwesome').append(html);
                    modalAwesome.open(data.modalId);

                    if(data.timeToClose) {
                        setTimeout(function(){
                            modalAwesome.close(data.modalId);
                        }, data.timeToClose);
                    }

                }
            });

            return false;

        });


        $(window).on(siteOptions.trigger.modalAwesomeCloseAjax, function(e, params) {

            setTimeout(function(){
                $(params.modal).remove();
            }, params.timeForCloseAnim);

        });


        $(window).on(siteOptions.trigger.modalAwesomeButtonOpenClickAjax, function(e, params) {

            var data = {
                'modalId'   : params.button.attr('data-' + modalAwesome.default.attr.id),
                'mode'      : params.button.attr('data-' + modalAwesome.default.attr.mode),
                'animIn'    : params.button.attr('data-' + modalAwesome.default.attr.animIn),
                'animOut'   : params.button.attr('data-' + modalAwesome.default.attr.animOut),
                'workClass' : params.button.attr('data-' + modalAwesome.default.attr.workClass),
                'winClass'  : params.button.attr('data-' + modalAwesome.default.attr.winClass),
                'layout'    : params.button.attr('data-' + modalAwesome.default.attr.layout),
                'message'   : false,

                'model' : params.button.attr('data-' + modalAwesome.default.attr.model), // if model is present, so this modal with form
            };

            $(window).trigger(siteOptions.trigger.modalAwesomeOpenAjax, data);

        });


    },


    'notification': function(options) {

        var parentObj = this,
            defaults = {
            'modalId': 'notification',
            'mode': '',
            'model': false,
            'animIn': 'leftToRight',
            'animOut': 'leftToRight',
            'workClass': 'css-vertical-align-top1',
            'winClass': 'winClass',
            'layout': false,
            'language': parentObj.defaults.language,

            'message': 'Hello World!',
            'timeToClose': 2000
        },
        newOptions = siteOptions.setOptions({
            defaults: defaults,
            source: isExist(options) ? options : {}
        });

        $(window).trigger(siteOptions.trigger.modalAwesomeOpenAjax, newOptions);

    },



};
