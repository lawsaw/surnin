var intTelInput = {



    'defaults': {

        'container': 'intTelInput',
        'isInitedClass': 'intTelInput--inited',
        'mode': 'default',
        'elem': '',

    },


    'mode': {

        'default': {
           nationalMode : false ,
           separateDialCode : true ,
           initialCountry : 'auto',
           'geoIpLookup' : function(callback) {
               $.get('/site/ipinfo', function(json) {
                   json = JSON.parse(json);
                   var countryCode = (json && json.country) ? json.country : "";
                   $(".intPhone").parents('form').find('input.country').val(countryCode);
                   callback(countryCode);
               })},
           'autoPlaceholder' : true,
        },
        'newMode': {

        }

    },


    'build': function(options) {
        var parentObj = this;
        switch (options.mode) {
            case 'default':
                $(options.elem).intlTelInput(
                    {
                        nationalMode : false ,
                        separateDialCode : true ,
                        initialCountry : 'auto',
                        'geoIpLookup' : function(callback) {
                            $.get('/site/ipinfo', function(json) {
                                json = JSON.parse(json);
                                var countryCode = (json && json.country) ? json.country : "";
                                $(options.elem).parents('form').find('input.country').val(countryCode);
                                callback(countryCode);
                            })},
                        'autoPlaceholder' : true,
                    }
                );
                break;
            case 'newMode':
                break;
            default:
                break;
        }

        parentObj.clickListener(options);

    },


    'clickListener': function(options) {

        $(document).on('click', options.elem, function() {
            var item = $(this);
            setTimeout(function(){
                //item.next('ul.country-list').scrollTo('li.active', 250, {offset:-90});
                var mobileList = $(options.elem).parents('form').find('.intl-tel-input ul.country-list');
                mobileList.scrollTo('li.active', 250, {offset:-mobileList.height()/2});
            },250);
        });

    },


    'init': function(options) {

        var parentObj = this,
            options = siteOptions.setOptions({
                defaults: parentObj.defaults,
                source: isExist(options) ? options : {}
            });

        options.elem = $(document).find('.' + options.container);

        if($(options.elem).hasClass(options.isInitedClass)) { return false; }

        parentObj.build(options);

        $(options.elem).addClass(options.isInitedClass);

    },


};
