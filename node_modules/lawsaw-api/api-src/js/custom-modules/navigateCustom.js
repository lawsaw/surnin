var navigateCustom = {



    'default': {

        'spySection': '.spySection',
        'spyLink': '.spyLink',
        'spyLinkContainer': '.spyLink-container',
        'spyLinkActive': 'spyLink-active',
        'idTarget': 'data-navigate-target',
        'event': 'click',
        'spySectionIn': 'spySection-in',
        'spySectionOut': 'spySection-out',
        'deltaTop': 0,
        'deltaBottom': 0,
        'from': 'el-top = vp-center',
        'to': 'el-bottom = vp-center',
        'modal': {
            'modalTimeAnimClose': 300,
            'lightboxClass': 'modalAwesome--lightbox'
        },

    },



    'isLightbox' : function() {
        return siteOptions.wrap.html().hasClass(this.default.modal.lightboxClass) ? true : false;
    },



    'init': function(options){

        var parentObj = this,
            newOptions = siteOptions.setOptions({
                defaults: parentObj.default,
                source: isExist(options) ? options : {}
            });

        newOptions.spyLinkContainer = $(document).find(newOptions.spyLinkContainer);

        this.listener(newOptions);
        this.navigate(newOptions);
        this.scrollFromUrl(newOptions);

    },



    'listener': function(options){

        var parentObj = this;
        $(options.spySection).scroolly([
            {
                from: options.from,
                to: options.to,
                onScroll: function($el){
                    parentObj.linkToggle(options, $el);
                },
                onCheckOut: function($el){
                    parentObj.linkToggle(options, $el);
                    $el.removeClass(options.spySectionIn);
                    $el.addClass(options.spySectionOut);
                },
                onCheckIn: function($el){
                    parentObj.linkToggle(options, $el);
                    $el.removeClass(options.spySectionOut);
                    $el.addClass(options.spySectionIn);
                }
            }
        ]);

    },



    'navigate': function(options) {

        var parentObj = this;
        $(document).find(options.spyLink).on(options.event, function(){
           var link = $(this),
               href = link.attr('href').substr(1),
               section = $(document).find(options.spySection + '[' + options.idTarget + '='+href+']');

            setTimeout(function(){
                parentObj.scrollTo(options, section);
            }, !parentObj.isLightbox() ? 0 : options.modal.modalTimeAnimClose)
            //parentObj.linkToggle(options, section);
            //return false;

        });

    },



    'scrollTo': function(options, section){

        var parentObj = this;
        $('html, body').animate({scrollTop: section.offset().top - options.deltaTop},
            1000,
            function(){
                parentObj.linkToggle(options, section);
            }
        );

    },



    'linkToggle': function(options, section){

        var target = section.attr(options.idTarget),
            link = $(document).find(options.spyLink + '[href="#' + target + '"]'),
            linkOther = $(document).find(options.spyLink);

        linkOther.removeClass(options.spyLinkActive);
        link.addClass(options.spyLinkActive);

        options.spyLinkContainer.attr({
            'data-spy': target
        });

    },



    'getListOfSections': function(options){

        var sections = $(document).find(options.spySection),
            list = [],
            parentObj = this;
        sections.each(function(){
            var sectionId = $(this).attr(options.idTarget);
            list.push(sectionId);
        });
        //console.log(list);
        return list;

    },



    'scrollFromUrl': function(options){
        var href = url().fragment,
            list = this.getListOfSections(options),
            parentObj = this;
        for(var i=0; i<list.length; i++) {
            if(href == list[i]) {
                var sectionId = href;
                break;
            }
        }
        if(sectionId) {
            setTimeout(function(){
                parentObj.scrollTo(options, $(document).find('[' + options.idTarget + '='+sectionId+']'));
            },1000);
        }
    },




};